/* ═══════════════════════════════════════════════════════════════════════════
   FinAssist — Mobile CSS
   Transforms the desktop sidebar layout into a native-feeling mobile app.
   Bottom tab bar navigation, full-screen panels, touch-friendly sizing.
   ═══════════════════════════════════════════════════════════════════════════ */

@media (max-width: 768px) {

  /* ── RESET DESKTOP LAYOUT ────────────────────────────────────────────── */
  html, body { overflow: hidden; height: 100%; height: 100dvh; }

  .container-fluid { padding: 0 !important; height: 100dvh !important; }
  .row { flex-direction: column !important; height: 100dvh !important; flex-wrap: nowrap !important; }

  /* Hide desktop sidebar */
  .col-md-3.menu-sidebar { display: none !important; }

  /* Main content takes full width */
  .col-md-9.main-content {
    flex: 1 !important;
    max-width: 100% !important;
    width: 100% !important;
    padding: 0 !important;
    overflow: hidden !important;
    height: 100dvh !important;
    display: flex !important;
    flex-direction: column !important;
  }

  /* Card fills remaining space above bottom nav */
  .chat-container, .card {
    height: 100% !important;
    display: flex !important;
    flex-direction: column !important;
    flex: 1 !important;
    min-height: 0 !important;
  }

  /* ── TOP HEADER ──────────────────────────────────────────────────────── */
  .card-header {
    padding: 14px 16px !important;
    display: flex !important;
    align-items: center !important;
    gap: 10px !important;
    flex-shrink: 0 !important;
  }

  /* Mobile brand logo in header */
  .mobile-brand-header {
    display: flex !important;
    align-items: center;
    gap: 10px;
    flex: 1;
  }
  .mobile-brand-icon {
    width: 34px; height: 34px;
    background: linear-gradient(135deg, #2563eb, #7c3aed);
    border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    color: #fff; font-size: 15px;
    box-shadow: 0 3px 10px rgba(37,99,235,0.3);
    flex-shrink: 0;
  }
  .mobile-brand-text { font-size: 1rem; font-weight: 800; color: #0f172a; }
  .mobile-brand-sub  { font-size: 10px; color: #94a3b8; font-weight: 500; margin-top: 1px; }

  .card-header h5 { font-size: 0.95rem !important; }

  /* ── TICKER BAR ──────────────────────────────────────────────────────── */
  .ticker-bar { flex-shrink: 0 !important; }

  /* ── CARD BODY / CONTENT AREA ────────────────────────────────────────── */
  .card-body {
    flex: 1 !important;
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
    padding-bottom: 70px !important; /* space for bottom nav */
    min-height: 0 !important;
  }

  /* ── HOME SCREEN ─────────────────────────────────────────────────────── */
  .home-page { padding: 16px !important; }

  .home-hero-v2 {
    padding: 28px 20px 24px !important;
    flex-direction: column !important;
    gap: 20px !important;
    border-radius: 16px !important;
    margin-bottom: 16px !important;
    text-align: center !important;
  }

  .hero-icon-cluster {
    width: 90px !important; height: 90px !important;
  }
  .hero-center-icon {
    width: 56px !important; height: 56px !important;
    font-size: 1.4rem !important;
    border-radius: 16px !important;
  }
  .orbit-dot { width: 22px !important; height: 22px !important; margin: -11px 0 0 -11px !important; font-size: 0.6rem !important; }

  .hero-badge { font-size: 0.65rem !important; justify-content: center; }
  .hero-title { font-size: 1.4rem !important; margin-bottom: 8px !important; }
  .hero-sub   { font-size: 0.82rem !important; margin-bottom: 16px !important; }

  .hero-stats { justify-content: center !important; gap: 8px !important; }
  .hero-stat  { padding: 8px 12px !important; }
  .hero-stat-val { font-size: 1rem !important; }

  .hero-chips { justify-content: center !important; gap: 6px !important; margin-top: 12px !important; }
  .hero-chip  { font-size: 0.72rem !important; padding: 5px 10px !important; }

  /* Feature cards — single column on mobile */
  .features-grid {
    grid-template-columns: 1fr !important;
    gap: 10px !important;
  }
  .chat-feature-card, .feature-card-wide {
    grid-column: span 1 !important;
    grid-row: auto !important;
  }
  .feature-card {
    padding: 14px 16px !important;
    border-radius: 14px !important;
  }
  .feature-icon { width: 40px !important; height: 40px !important; font-size: 1rem !important; }
  .feature-body h3 { font-size: 0.9rem !important; }
  .feature-body p  { font-size: 0.78rem !important; }
  .feature-tags span { font-size: 0.65rem !important; padding: 2px 7px !important; }

  /* ── PANELS (news, currency, metals, etc.) ───────────────────────────── */
  .feature-panel {
    height: auto !important;
    max-height: none !important;
    border-radius: 0 !important;
    border: none !important;
    box-shadow: none !important;
    padding-bottom: 80px !important;
  }

  .fp-header {
    padding: 14px 16px !important;
    border-radius: 0 !important;
    flex-wrap: wrap !important;
    gap: 10px !important;
  }
  .fp-title    { font-size: 1rem !important; }
  .fp-subtitle { font-size: 0.75rem !important; }
  .fp-content  { padding: 12px 14px !important; }
  .fp-icon-wrap { width: 36px !important; height: 36px !important; font-size: 0.9rem !important; }

  .fp-refresh-btn { padding: 6px 12px !important; font-size: 0.75rem !important; }

  /* ── NEWS PANEL ──────────────────────────────────────────────────────── */
  #newsPanel {
    padding: 14px !important;
    padding-bottom: 80px !important;
  }
  .news-card { padding: 12px 14px !important; border-radius: 10px !important; }
  .news-card-title { font-size: 0.83rem !important; }
  .news-card-meta  { flex-wrap: wrap !important; gap: 4px !important; }

  /* ── FORMS / CALCULATORS ─────────────────────────────────────────────── */
  #formsContainer { padding-bottom: 80px !important; }

  .form-panel { padding: 16px !important; }
  .form-group label { font-size: 0.8rem !important; }
  .form-control { font-size: 0.9rem !important; padding: 10px 12px !important; border-radius: 8px !important; }
  .btn-calculate { padding: 12px 20px !important; font-size: 0.9rem !important; width: 100% !important; border-radius: 10px !important; }

  /* Results */
  .results-container { padding: 14px !important; padding-bottom: 80px !important; }
  .result-header h3  { font-size: 1rem !important; }
  .result-body       { padding: 14px !important; }

  /* ── CHAT PANEL ──────────────────────────────────────────────────────── */
  #messageFormeight {
    padding: 10px 12px !important;
    padding-bottom: calc(10px + env(safe-area-inset-bottom)) !important;
  }

  /* ── STOCK DASHBOARD PANEL ───────────────────────────────────────────── */
  #stockDashboardPanel {
    padding: 12px 14px !important;
    padding-bottom: 80px !important;
  }

  #si-back-btn { padding: 8px 12px !important; font-size: 11px !important; }

  .fh-search-wrap input { font-size: 0.85rem !important; }

  /* Stock chart */
  #stock-dashboard { font-size: 0.85rem !important; }

  /* ── PORTFOLIO PANEL ─────────────────────────────────────────────────── */
  #portfolioPanel {
    padding-bottom: 0 !important;
  }

  .pt-panel-header {
    padding: 14px 16px !important;
  }
  .pt-panel-title { font-size: 0.9rem !important; }
  .pt-title-icon  { width: 30px !important; height: 30px !important; font-size: 12px !important; }
  .pt-header-actions { gap: 6px !important; }
  .pt-live-badge  { font-size: 9.5px !important; padding: 4px 9px !important; }
  .pt-ccy-badge   { font-size: 9.5px !important; padding: 4px 9px !important; }
  .pt-user-badge  { font-size: 11px !important; padding: 4px 10px !important; }

  .pt-btn-primary { padding: 8px 14px !important; font-size: 12px !important; }

  /* Summary cards — 2 per row on mobile */
  .pt-summary-cards {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 8px !important;
  }
  .pt-sum-card { padding: 10px 12px !important; border-radius: 10px !important; }
  .pt-sum-label { font-size: 8px !important; }
  .pt-sum-val   { font-size: 13px !important; margin-top: 4px !important; }

  /* Portfolio scroll area */
  .pt-scroll-area { padding: 12px 10px !important; padding-bottom: 80px !important; }

  /* Portfolio table → mobile card layout */
  .pt-table-wrap { border-radius: 12px !important; overflow: hidden !important; margin-top: 10px !important; }
  .pt-table { font-size: 11.5px !important; }
  .pt-table thead { display: none !important; }

  .pt-tr {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    gap: 0 !important;
    padding: 0 !important;
    border-bottom: 1px solid #f1f5f9 !important;
    position: relative !important;
  }

  .pt-tr td {
    display: block !important;
    padding: 6px 10px !important;
    border: none !important;
  }

  /* Stock name — spans full width */
  .pt-tr td:nth-child(1) {
    grid-column: 1 / -1 !important;
    padding: 12px 10px 6px !important;
    border-bottom: 1px solid #f8fafc !important;
  }

  /* Qty + Avg Buy */
  .pt-tr td:nth-child(2)::before { content: 'Qty: '; font-size: 9px; color: #94a3b8; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; display: block; margin-bottom: 2px; }
  .pt-tr td:nth-child(3)::before { content: 'Avg Buy: '; font-size: 9px; color: #94a3b8; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; display: block; margin-bottom: 2px; }

  /* LTP + Invested */
  .pt-tr td:nth-child(4)::before { content: 'LTP: '; font-size: 9px; color: #94a3b8; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; display: block; margin-bottom: 2px; }
  .pt-tr td:nth-child(5)::before { content: 'Invested: '; font-size: 9px; color: #94a3b8; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; display: block; margin-bottom: 2px; }

  /* Curr Value + P&L */
  .pt-tr td:nth-child(6)::before { content: 'Curr. Value: '; font-size: 9px; color: #94a3b8; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; display: block; margin-bottom: 2px; }
  .pt-tr td:nth-child(7)::before { content: 'P&L: '; font-size: 9px; color: #94a3b8; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; display: block; margin-bottom: 2px; }

  /* Return + actions */
  .pt-tr td:nth-child(8)::before { content: 'Return: '; font-size: 9px; color: #94a3b8; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; display: block; margin-bottom: 2px; }

  /* Action buttons — float to top right */
  .pt-tr td:nth-child(9) {
    position: absolute !important;
    top: 10px !important;
    right: 8px !important;
    padding: 0 !important;
    grid-column: auto !important;
  }

  .pt-remove-btn, .pt-edit-btn {
    padding: 6px 8px !important;
    color: #cbd5e1 !important;
    transform: scale(1) !important;
    font-size: 12px !important;
  }

  /* Portfolio modal */
  .pt-modal-box {
    margin: 12px !important;
    padding: 22px 18px 18px !important;
    border-radius: 16px !important;
    max-width: none !important;
    width: calc(100% - 24px) !important;
  }

  /* Identity card */
  .pt-identity-card {
    padding: 28px 20px 20px !important;
    border-radius: 16px !important;
  }
  .pt-identity-title { font-size: 1rem !important; }
  .pt-identity-sub   { font-size: 0.8rem !important; }

  /* ── MUTUAL FUNDS ────────────────────────────────────────────────────── */
  .mf-search-bar { padding: 10px 14px !important; }
  .mf-search-input { font-size: 0.85rem !important; }

  #mfCatBar { padding: 8px 14px !important; gap: 6px !important; overflow-x: auto !important; flex-wrap: nowrap !important; }
  .mf-cat-btn { white-space: nowrap !important; font-size: 0.72rem !important; padding: 5px 10px !important; }

  .mf-fund-card { padding: 12px 14px !important; border-radius: 10px !important; }
  .mf-fund-name { font-size: 0.82rem !important; }
  .mf-fund-meta { font-size: 0.72rem !important; }

  /* ── GLOSSARY ────────────────────────────────────────────────────────── */
  .gloss-cats { padding: 8px 14px !important; gap: 6px !important; overflow-x: auto !important; flex-wrap: nowrap !important; }
  .gloss-cat-btn { white-space: nowrap !important; font-size: 0.72rem !important; }

  .gloss-card { padding: 12px 14px !important; border-radius: 10px !important; }
  .gloss-term { font-size: 0.88rem !important; }
  .gloss-def  { font-size: 0.78rem !important; }

  /* ── MARKET DATA WIDGETS (gainers/losers/etc) ────────────────────────── */
  .market-widgets-row {
    grid-template-columns: 1fr !important;
    gap: 12px !important;
  }
  .widget-card { border-radius: 12px !important; }
  .widget-header { padding: 12px 14px !important; }
  .widget-title  { font-size: 0.82rem !important; }

  /* Currency cards */
  .currency-grid {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 8px !important;
  }
  .currency-card { padding: 12px !important; border-radius: 10px !important; }

  /* ── TOAST (notifications) ───────────────────────────────────────────── */
  .pt-toast {
    bottom: 80px !important; /* above bottom nav */
    right: 12px !important;
    left: 12px !important;
    border-radius: 10px !important;
    font-size: 12px !important;
    padding: 10px 14px !important;
  }

  /* ── STEP-UP SIP / ZAKAT RESULTS ─────────────────────────────────────── */
  .stepsip-compare { padding: 12px !important; }
  .stepsip-compare-row { font-size: 0.8rem !important; padding: 8px 6px !important; }

  .zakat-hero { padding: 20px 16px !important; border-radius: 12px !important; }
  .zakat-hero-value { font-size: 1.6rem !important; }
  .zakat-nisab-bar { flex-direction: column !important; gap: 10px !important; align-items: flex-start !important; }

  /* ── GENERAL SPACING ─────────────────────────────────────────────────── */
  .home-page > *:not(.home-hero-v2) { margin-bottom: 12px !important; }

} /* end @media (max-width: 768px) */


/* ══════════════════════════════════════════════════════════════════════════
   BOTTOM NAVIGATION BAR
   ══════════════════════════════════════════════════════════════════════════ */

.mob-nav {
  display: none; /* hidden on desktop */
}

@media (max-width: 768px) {
  .mob-nav {
    display: flex;
    position: fixed;
    bottom: 0; left: 0; right: 0;
    z-index: 9990;
    background: #ffffff;
    border-top: 1px solid #e2e8f0;
    box-shadow: 0 -4px 20px rgba(15,23,42,0.08);
    padding-bottom: env(safe-area-inset-bottom);
    height: calc(60px + env(safe-area-inset-bottom));
    align-items: flex-start;
    padding-top: 0;
  }

  .mob-nav-item {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 3px;
    height: 60px;
    cursor: pointer;
    border: none;
    background: none;
    font-family: inherit;
    color: #94a3b8;
    transition: color 0.2s, transform 0.15s;
    -webkit-tap-highlight-color: transparent;
    position: relative;
  }

  .mob-nav-item:active { transform: scale(0.9); }

  .mob-nav-item.active { color: #2563eb; }
  .mob-nav-item.active .mob-nav-icon {
    background: #eff6ff;
    color: #2563eb;
  }

  .mob-nav-icon {
    width: 32px; height: 32px;
    border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    font-size: 14px;
    transition: background 0.2s, color 0.2s;
  }

  .mob-nav-label {
    font-size: 9.5px;
    font-weight: 600;
    letter-spacing: 0.02em;
    line-height: 1;
  }

  /* Active indicator dot above icon */
  .mob-nav-item.active::before {
    content: '';
    position: absolute;
    top: 5px;
    width: 18px; height: 3px;
    border-radius: 2px;
    background: #2563eb;
  }
}


/* ══════════════════════════════════════════════════════════════════════════
   MORE DRAWER (slides up from bottom)
   ══════════════════════════════════════════════════════════════════════════ */

.mob-drawer-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(15,23,42,0.4);
  z-index: 9991;
  backdrop-filter: blur(2px);
}
.mob-drawer-overlay.open { display: block; }

.mob-drawer {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  z-index: 9992;
  background: #fff;
  border-radius: 20px 20px 0 0;
  box-shadow: 0 -8px 40px rgba(15,23,42,0.15);
  padding: 0 0 calc(16px + env(safe-area-inset-bottom));
  transform: translateY(100%);
  transition: transform 0.3s cubic-bezier(0.34,1.2,0.64,1);
}
.mob-drawer.open { transform: translateY(0); }

.mob-drawer-handle {
  width: 36px; height: 4px;
  background: #e2e8f0;
  border-radius: 2px;
  margin: 12px auto 0;
}

.mob-drawer-title {
  font-size: 0.75rem;
  font-weight: 800;
  color: #94a3b8;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  padding: 14px 20px 6px;
}

.mob-drawer-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 6px;
  padding: 6px 16px 8px;
}

.mob-drawer-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 14px 8px;
  border-radius: 14px;
  cursor: pointer;
  border: none;
  background: #f8fafc;
  font-family: inherit;
  color: #334155;
  transition: background 0.15s, transform 0.15s;
  -webkit-tap-highlight-color: transparent;
}
.mob-drawer-item:active { transform: scale(0.94); background: #f0f4ff; }

.mob-drawer-icon {
  width: 44px; height: 44px;
  border-radius: 14px;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.1rem;
}
.mob-drawer-label {
  font-size: 0.72rem;
  font-weight: 600;
  text-align: center;
  line-height: 1.3;
}

/* Divider inside drawer */
.mob-drawer-sep {
  height: 1px;
  background: #f1f5f9;
  margin: 4px 16px;
}


/* ═══════════════════════════════════════════════════════════════════════════
   BUG FIXES — Mobile only
   ═══════════════════════════════════════════════════════════════════════════ */

@media (max-width: 768px) {

/* ── FIX 1: Home page blank on return ────────────────────────────────────
   welcomeScreen sits inside .card-body which has overflow-y:auto on desktop.
   On mobile the card-body flex chain collapses. Force it to fill properly. */
  #welcomeScreen {
    display: flex;
    flex-direction: column;
    width: 100%;
    min-height: 100%;
    height: auto !important;
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch;
    background: var(--bg, #f0f2f7) !important;
  }

  /* Ensure card-body is actually a scrollable container on mobile */
  .card-body {
    display: block !important;
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
    height: auto !important;
    flex: 1 1 auto !important;
    min-height: 0 !important;
  }

  /* formsContainer also needs to scroll properly */
  .forms-container {
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
    height: auto !important;
    padding-bottom: 80px !important;
  }


/* ── FIX 2: Stock search dropdown arrow overlapping text ─────────────────
   The native select arrow or a pseudo-element is sitting on top of the
   input text. Remove any right-side padding collision and clip the arrow. */
  .search-wrapper {
    position: relative !important;
    width: 100% !important;
  }

  #stockName.form-control {
    padding-right: 14px !important;   /* no extra padding for fake arrow */
    font-size: 0.88rem !important;
    width: 100% !important;
    box-sizing: border-box !important;
    /* Remove browser select appearance if it was accidentally styled as one */
    -webkit-appearance: none !important;
    appearance: none !important;
  }

  /* Hide any stray dropdown arrow pseudo-elements inside search-wrapper */
  .search-wrapper::after {
    display: none !important;
  }


/* ── FIX 3: Stock search text clipped / need to swipe ────────────────────
   Reduce font, loosen layout so full placeholder/typed text is visible. */
  #stockForm {
    padding: 20px 16px !important;
  }

  #stockForm .form-group {
    margin-bottom: 16px !important;
  }

  #stockForm label {
    font-size: 0.72rem !important;
    letter-spacing: 0.05em !important;
  }

  #stockName.form-control {
    font-size: 0.88rem !important;
    padding: 11px 12px !important;
    height: auto !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }

  /* Dropdown items — shrink font, allow text to wrap nicely */
  .custom-dropdown {
    max-height: 220px !important;
    border-radius: 0 0 12px 12px !important;
    z-index: 9000 !important;        /* above everything */
  }

  .dropdown-item {
    padding: 11px 14px !important;
    gap: 8px !important;
    flex-wrap: nowrap !important;
    align-items: center !important;
  }

  .d-name {
    font-size: 0.8rem !important;
    white-space: normal !important;
    flex: 1 !important;
    min-width: 0 !important;
    overflow: hidden !important;
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
  }

  .d-code {
    font-size: 0.68rem !important;
    padding: 3px 6px !important;
    flex-shrink: 0 !important;
    white-space: nowrap !important;
  }

  /* Nifty badge that was getting cut off (Image 1) */
  .dropdown-item .d-exch {
    font-size: 0.65rem !important;
    flex-shrink: 0 !important;
  }


/* ── FIX 4: Top Gainers/Losers/Volume/Value — horizontal scroll cards ────
   On mobile replace 4-column grid with a single horizontally scrollable
   tab-style section that shows one widget at a time using radio-style tabs. */

  .market-widgets-grid {
    display: flex !important;
    flex-direction: column !important;
    gap: 0 !important;
    margin-top: 16px !important;
    background: #fff !important;
    border-radius: 16px !important;
    border: 1px solid #e2e8f0 !important;
    box-shadow: 0 2px 12px rgba(15,23,42,0.07) !important;
    overflow: hidden !important;
  }

  /* Tab bar across the top */
  .market-widgets-grid::before {
    display: none !important; /* remove any pseudo content */
  }

  /* Each widget card becomes a section, all visible stacked */
  .market-widgets-grid .widget-card,
  .market-widgets-grid .feature-card.widget-card {
    border: none !important;
    border-bottom: 1px solid #f1f5f9 !important;
    border-radius: 0 !important;
    box-shadow: none !important;
    transform: none !important;
    margin: 0 !important;
  }

  .market-widgets-grid .widget-card:last-child,
  .market-widgets-grid .feature-card.widget-card:last-child {
    border-bottom: none !important;
  }

  /* Widget header — compact */
  .market-widgets-grid .widget-header {
    padding: 10px 14px !important;
    background: #f8fafc !important;
    border-bottom: 1px solid #f1f5f9 !important;
  }

  .market-widgets-grid .widget-title {
    font-size: 0.78rem !important;
  }

  /* Widget body — horizontal scroll row of items */
  .market-widgets-grid .widget-body {
    display: flex !important;
    flex-direction: row !important;
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch !important;
    padding: 10px 12px !important;
    gap: 8px !important;
    scrollbar-width: none !important;
  }
  .market-widgets-grid .widget-body::-webkit-scrollbar { display: none !important; }

  /* Each stock item → compact pill card */
  .market-widgets-grid .widget-item {
    display: flex !important;
    flex-direction: column !important;
    align-items: flex-start !important;
    justify-content: space-between !important;
    min-width: 90px !important;
    max-width: 90px !important;
    flex-shrink: 0 !important;
    background: #f8fafc !important;
    border: 1px solid #e2e8f0 !important;
    border-radius: 10px !important;
    padding: 9px 10px !important;
    cursor: pointer !important;
    gap: 4px !important;
    border-bottom: 1px solid #e2e8f0 !important;
  }
  .market-widgets-grid .widget-item:hover {
    background: #eff6ff !important;
    border-color: #bfdbfe !important;
    padding-left: 10px !important; /* cancel desktop hover slide */
  }

  .market-widgets-grid .widget-item-left,
  .market-widgets-grid .widget-item-right {
    display: contents !important; /* flatten — all children go into column */
  }

  .market-widgets-grid .widget-sym {
    font-size: 0.75rem !important;
    font-weight: 800 !important;
    color: #0f172a !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    max-width: 70px !important;
  }

  .market-widgets-grid .widget-price {
    font-size: 0.68rem !important;
    color: #64748b !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    max-width: 70px !important;
  }

  .market-widgets-grid .widget-pct {
    font-size: 0.72rem !important;
    font-weight: 700 !important;
    white-space: nowrap !important;
  }

  .market-widgets-grid .widget-change {
    font-size: 0.65rem !important;
    white-space: nowrap !important;
    color: #94a3b8 !important;
  }


/* ── FIX 5: AI Chat — input bar not visible / positioned wrong ───────────
   On mobile the card-footer (chat input) must sit above the bottom nav,
   and the message area must not overflow behind it. */

  /* chatFooter — fixed above bottom nav */
  #chatFooter.card-footer {
    position: fixed !important;
    bottom: calc(60px + env(safe-area-inset-bottom)) !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 9980 !important;
    padding: 10px 12px !important;
    background: #fff !important;
    border-top: 1px solid #e2e8f0 !important;
    box-shadow: 0 -4px 16px rgba(15,23,42,0.08) !important;
  }

  /* Input group — proper flex row */
  #chatFooter .input-group {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    gap: 8px !important;
    width: 100% !important;
  }

  /* Text input */
  #chatFooter .type_msg {
    flex: 1 !important;
    min-width: 0 !important;
    font-size: 0.88rem !important;
    padding: 10px 14px !important;
    border-radius: 22px !important;
    height: 42px !important;
  }

  /* Buttons row */
  #chatFooter .input-group-append {
    display: flex !important;
    flex-direction: row !important;
    gap: 6px !important;
    flex-shrink: 0 !important;
  }

  #chatFooter .send_btn,
  #chatFooter .voice_btn {
    width: 42px !important;
    height: 42px !important;
    padding: 0 !important;
    border-radius: 50% !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    font-size: 0.95rem !important;
    flex-shrink: 0 !important;
  }

  /* Message body — leave room for fixed chat footer + bottom nav */
  #messageFormeight {
    padding: 16px 14px !important;
    padding-bottom: calc(70px + 60px + env(safe-area-inset-bottom) + 10px) !important;
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
    flex: 1 !important;
  }

  /* Chat bubbles — narrower max-width on small screens */
  .msg_cotainer_send { max-width: 85% !important; font-size: 0.85rem !important; padding: 10px 14px !important; }
  .msg_cotainer      { max-width: 90% !important; font-size: 0.85rem !important; padding: 10px 14px !important; }

} /* end @media (max-width: 768px) */